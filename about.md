## 1. Research: Flutter Implicit Animations

- Keywords:
    - Best animations in flutter
    - tween animation flutter
    - flutter animation examples
    - flutter animation widgets
    - fade animation flutter
    - flutter transition animation
    - Types of animations in flutter
    - transition animation flutter
    - Best animations in flutter github
    - flutter animation
    - flutter animation examples
    - flutter transition animation tutorial
    - flutter transitions
    - flutter transition animation example
    - hero animation flutter
    - Hero animation flutter example
    - Hero animation flutter github
    - Hero animation flutter tutorial
    - custom hero animation flutter
- Video Title: Custom Animation in Flutter with Transition Animation, AnimatedPositioned, and Hero
  Widget

## 2. Research: Competitors

**Flutter Videos/Articles**

- 10K: https://www.youtube.com/watch?v=3GZ_fZd6o8Q
- 5K: https://www.youtube.com/watch?v=Rtu-EBTAix0
- 154K: https://www.youtube.com/watch?v=hC3s2YdtWt8
- 62K: https://www.youtube.com/watch?v=QKxjG1Sq_sk
- 4.7K: https://www.youtube.com/watch?v=0E9URkVCLg4
- 41K: https://www.youtube.com/watch?v=lxkFL9disq0
- 247K: https://www.youtube.com/watch?v=rLwWVbv3xDQ
- 17K: https://www.youtube.com/watch?v=RLPZzDOPXG4
- 8.3K: https://www.youtube.com/watch?v=7dl_Cxo2FN0
- 42K: https://www.youtube.com/watch?v=4naljQa5QA8
- 16K: https://www.youtube.com/watch?v=ZbVoHGpVEPE
- 10K: https://www.youtube.com/watch?v=C8Ot7wefZuc
- 433K: https://www.youtube.com/watch?v=Be9UH1kXFDw
- 20K: https://www.youtube.com/watch?v=GsmP-NzXXa0
- https://www.googleadservices.com/pagead/aclk?sa=L&ai=DChcSEwjtvN7128eDAxXCi4MHHfruCdYYABABGgJlZg&ase=2&gclid=CjwKCAiA7t6sBhAiEiwAsaieYufg05KYZ9lIqv71uK4Xm3inM6rH5HmLOBJjKpNOHi4YCh0kUxnbHBoCVEkQAvD_BwE&ohost=www.google.com&cid=CAESVeD2b5-b5o_nsCgB34QkGUsPHN-c_lgHs9x8N6DyuQbUwEdJ6w-rt2oVChB8Wbz-0IVqVs_YFL6IbxfIEE-dZl6USlhpbpEUyGUsGMuTx9tmq8yKFss&sig=AOD64_3IOJqtWJm9InzRBVrefwuDkqQlOg&q&nis=4&adurl&ved=2ahUKEwi42dn128eDAxUFgP0HHTJvAmoQ0Qx6BAgIEAE
- https://docs.flutter.dev/ui/animations/tutorial
- https://docs.flutter.dev/ui/animations
- https://flexiple.com/app/basics-of-flutter-animations
- https://medium.com/flutter-community/flutter-animations-comprehensive-guide-cb93b246ca5d
- https://www.freecodecamp.org/news/creating-custom-animations-in-flutter/
- https://www.javatpoint.com/flutter-animation
- https://www.tutorialspoint.com/flutter/flutter_animation.htm
- https://medium.flutterdevs.com/example-animations-in-flutter-2-1034a52f795b
- https://blog.logrocket.com/guide-advanced-flutter-animations/
- https://www.freecodecamp.org/news/creating-custom-animations-in-flutter/
- https://www.christianfindlay.com/blog/basic-flutter-animations-with-tweens
- https://github.com/mutualmobile/flutter_animations_example
- https://clouddevs.com/flutter/exploring-animation/
- https://www.tutorialkart.com/flutter/flutter-animation-basic-example/
- https://www.merixstudio.com/blog/animations-flutter/
- https://codersnack.com/flutter-animations-examples-2/
- https://stackoverflow.com/questions/50656593/basic-way-to-implement-of-animation-in-flutter
- https://www.edureka.co/blog/flutter-animations/
- https://www.codingninjas.com/studio/library/flutter-animation
- https://quickcoder.org/flutter-animations/
-

**Android/Swift/React Videos**

- Playlist: https://www.youtube.com/watch?v=dXVgb3igGJ4&list=PLYxzS__5yYQmdfEyKDrlG5E0F0u7_iIUo
- Playlist: https://www.youtube.com/watch?v=pTtxhuThMew&list=PLQocKVqyqZDSCyzTX6QYZ5k5GBv4_TvAX
- Playlist: https://www.youtube.com/watch?v=uWpsHyKmEMo&list=PLB97yPrFwo5i7e8JG89XBfpWMyFOer_FY
- 4.3K: https://www.youtube.com/watch?v=9XOLW3bhFEI
- 25K: https://www.youtube.com/watch?v=-MuJSelrjHs
- 20K: https://www.youtube.com/watch?v=ffMQ_R2Q9pk
- Playlist: https://www.youtube.com/watch?v=pDJJI6bfK1k&pp=ygUTYW5pbWF0aW9ucyBpbiBzd2lmdA%3D%3D
- 34K: https://www.youtube.com/watch?v=pDJJI6bfK1k&pp=ygUTYW5pbWF0aW9ucyBpbiBzd2lmdA%3D%3D
- 21K: https://www.youtube.com/watch?v=xrEdTtkGnXM&pp=ygUTYW5pbWF0aW9ucyBpbiBzd2lmdA%3D%3D
- Playlist: https://www.youtube.com/watch?v=MpD7i3efk6A&list=PLUu5dK1pEfFexQlAskbONchfE55Wi0Sfp
- Playlist: https://www.youtube.com/watch?v=otMSB-dFuY8&list=PLrnPJCHvNZuARS1W7qMt-zxBNqWYZpOg6
- 26K: https://www.youtube.com/watch?v=mGNW3qkWOMw&pp=ygUVYW5pbWF0aW9ucyBpbiBhbmRyb2lk
- 52K: https://www.youtube.com/watch?v=VcrzLcokvvc&pp=ygUVYW5pbWF0aW9ucyBpbiBhbmRyb2lk
- https://developer.android.com/develop/ui/views/animations/overview
- https://www.geeksforgeeks.org/animation-in-android-with-example/
- https://www.tutorialspoint.com/android/android_animations.htm
- https://abhiandroid.com/materialdesign/animation
- https://www.digitalocean.com/community/tutorials/android-animation-example
- https://reintech.io/blog/implementing-animations-kotlin-android-motionlayout
- https://www.geeksforgeeks.org/android-animations-in-kotlin/
- https://developer.android.com/reference/kotlin/android/view/animation/Animation
- https://www.kodeco.com/2785491-android-animation-tutorial-with-kotlin
- https://www.kodeco.com/2785491-android-animation-tutorial-with-kotlin
- https://developer.apple.com/tutorials/swiftui/animating-views-and-transitions
- https://www.smashingmagazine.com/2019/11/performing-ios-animations-views-uikit-uiview/
- https://developer.apple.com/documentation/swiftui/animations
- https://lottiefiles.com/blog/working-with-lottie/how-to-add-lottie-animation-ios-app-swift
- https://www.kodeco.com/books/ios-animations-by-tutorials/v7.0
- https://www.kodeco.com/books/ios-animations-by-tutorials/v7.0
- https://reactnative.dev/docs/animated
- https://blog.bitsrc.io/top-5-animation-libraries-in-react-native-d00ec8ddfc8d
- https://docs.swmansion.com/react-native-reanimated/docs/fundamentals/your-first-animation/
- https://eveningkid.medium.com/the-basics-of-react-native-animations-fb00a8ccc178
- https://www.animatereactnative.com/
- https://instamobile.io/mobile-development/react-native-animated-view/
- https://www.codedaily.io/courses/Master-React-Native-Animations

**Great Features**

- As an implicit animation, AnimatedPositioned automatically handles the animation process when the
  properties, such as position (top, bottom, left, right), change. This simplicity in implementation
  reduces the need for explicit animation controllers.

**Problems from Videos**

- NA

**Problems from Flutter Stackoverflow**

- https://stackoverflow.com/questions/61697007/error-while-implementing-hero-animation-in-flutter
- https://stackoverflow.com/questions/57075921/a-hero-widget-cannot-be-the-descendant-of-another-hero-widget-after-version-chan
- https://stackoverflow.com/questions/68599745/no-material-widget-found-hero-animation-is-not-working-with-textfield
- https://stackoverflow.com/questions/68609965/flutter-hero-animation-with-textfield-error
- https://stackoverflow.com/questions/56793821/hero-animation-producing-renderbox-overflow
- https://stackoverflow.com/questions/60910629/flutter-error-there-are-multiple-heroes-that-share-the-same-tag-within-a-subtre
- https://stackoverflow.com/questions/51125024/there-are-multiple-heroes-that-share-the-same-tag-within-a-subtree
- https://stackoverflow.com/questions/60285522/animatedpositioned-is-not-animated-on-flutter
- https://stackoverflow.com/questions/76526100/how-can-we-animate-an-animatedpositioned-widget-to-right-of-screen-and-hide-it-o
- https://stackoverflow.com/questions/76547697/how-can-i-use-animatedpositioned-widget-as-a-child-of-a-row-widget

## 3. Video Structure

**Main Points / Purpose Of Lesson**

1. AnimatedPositioned widget from implicit animations of flutter
2. Hero animations in flutter
3. FadeTransition in flutter
4. Navigation between pages in flutter using PageRouteBuilder for animation purpose

**The Structured Main Content**

### HomePage

Inside `home_page.dart` file, we have an appBar(with title and actions parameter), body(calling
`LocationsWidget`), and BottomNavigationBar(with three icons).

```dart
class HomePage extends StatelessWidget {
  const HomePage({super.key});

  @override
  Widget build(BuildContext context) =>
      Scaffold(
        backgroundColor: Colors.blueGrey,
        appBar: buildAppBar(),
        body: const LocationsWidget(),
        bottomNavigationBar: buildBottomNavigation(),
      );
```

### LocationsWidget

Inside `locations_widget.dart` file, we have `LocationsWidget` class. We are
returning `LocationWidget` wrapped by `PageView.builder`, `Expanded`, and `Column`.

```dart
class LocationsWidget extends StatefulWidget {
  const LocationsWidget({super.key});

  @override
  LocationsWidgetState createState() => LocationsWidgetState();
}

class LocationsWidgetState extends State<LocationsWidget> {
  final pageController = PageController(viewportFraction: 0.8);
  int pageIndex = 0;

  @override
  Widget build(BuildContext context) =>
      Column(
        children: [
          Expanded(
            child: PageView.builder(
              controller: pageController,
              itemCount: locations.length,
              itemBuilder: (context, index) {
                final location = locations[index];
                return LocationWidget(location: location);
              },
              onPageChanged: (index) => setState(() => pageIndex = index),
            ),
          ),
          Text(
            '${pageIndex + 1}/${locations.length}',
            style: const TextStyle(color: Colors.white70),
          ),
          const SizedBox(height: 12)
        ],
      );
}
```

### LocationWidget

Inside the single location widget, which is in `locations_widget.dart` file, we are using `Stack` to
place two widgets (`ImageWidget` above and `ExpandedContentWidget` below) on each others. These
widgets are wrapped by `AnimatedPositioned` widget to animate them when changing their positions.

```dart
class LocationWidget extends StatefulWidget {
  final Location location;

  const LocationWidget({required this.location, super.key});

  @override
  LocationWidgetState createState() => LocationWidgetState();
}

class LocationWidgetState extends State<LocationWidget> {
  bool isExpanded = false;

  @override
  Widget build(BuildContext context) {
    final size = MediaQuery
        .of(context)
        .size;

    return Stack(
      alignment: Alignment.center,
      children: [
        AnimatedPositioned(
          duration: const Duration(milliseconds: 500),
          bottom: isExpanded ? 40 : 100,
          width: isExpanded ? size.width * 0.78 : size.width * 0.7,
          height: isExpanded ? size.height * 0.6 : size.height * 0.5,
          child: ExpandedContentWidget(location: widget.location),
        ),
        AnimatedPositioned(
          duration: const Duration(milliseconds: 500),
          bottom: isExpanded ? 150 : 100,
          child: GestureDetector(
            onPanUpdate: onPanUpdate,
            onTap: openDetailPage,
            child: ImageWidget(location: widget.location),
          ),
        ),
      ],
    );
  }

  void openDetailPage() {
    if (!isExpanded) {
      /// Tap to expand card
      setState(() => isExpanded = true);
      return;
    }

    Navigator.of(context).push(
      PageRouteBuilder(
        transitionDuration: const Duration(seconds: 1),
        reverseTransitionDuration: const Duration(seconds: 1),
        pageBuilder: (context, animation, secondaryAnimation) {
          final curvedAnimation = CurvedAnimation(
            parent: animation,
            curve: const Interval(0, 0.5),
          );

          return FadeTransition(
            opacity: curvedAnimation,
            child: DetailPage(location: widget.location, animation: animation),
          );
        },
      ),
    );
  }

  void onPanUpdate(DragUpdateDetails details) {
    if (details.delta.dy < 0) {
      setState(() {
        isExpanded = true;
      });
    } else if (details.delta.dy > 0) {
      setState(() {
        isExpanded = false;
      });
    }
  }
}

```

- We are creating `isExpanded` boolean flag to expand or collapse the `ExpandedContentWidget`.
- We are wrapping `ImageWidget` with `GestureDetector` to use `onTap` and `onPanUpdate` properties.
    - For `onPanUpdate`, we calling `onPanUpdate` method. We are saying here if y coordinate is
      negative or the user is dragging image widget to the top then set `isExpanded` boolean flag to
      true.
    - Otherwise y coordinate is positive when user is dragging down the image widget and
      set `isExpanded` boolean flag to false.
    - For `onTap` property, we are calling `openDetailPage` method. If `isExpanded` is false then
      make it true and return.
        - If `isExpanded` is true then use `PageRouteBuilder` for highly customized transitions,
          non-Material Design transitions, dynamic transitions based on user interactions.
        - Here we are using `FadeTransition` with opacity of type `CurvedAnimation` to navigate to
          the `DetailPage`.
        - We are also passing the `animation` of `pageBuilder` property of `PageRouteBuilder`
          to `DetailPage`.
- We are also changing the bottom position of `ImageWidget` according to `isExpanded` boolean
  flag.
- For `ExpandedContentWidget`, we changing its width and height, and bottom position according to
  the `isExpanded` boolean flag.

### DetailPage

Inside `detail_page.dart` file, we have `DetailPage` class. We are using `animation` from
the `LocationWidget` which actually comes from `pageBuilder` property of `PageRouteBuilder` to
synchronize the animation between `LocationWidget` and `DetailPage`.

```dart
class DetailPage extends StatelessWidget {
  final Location location;
  final Animation<double> animation;

  const DetailPage({
    required this.location,
    required this.animation,
    super.key,
  });

  @override
  Widget build(BuildContext context) =>
      Scaffold(
        extendBodyBehindAppBar: true,
        backgroundColor: Colors.white,
        appBar: AppBar(
          elevation: 0,
          backgroundColor: Colors.transparent,
          title: const Text('INTERESTS', style: TextStyle(color: Colors.white)),
          centerTitle: true,
          actions: [
            IconButton(
              icon: const Icon(Icons.close, color: Colors.white),
              onPressed: Navigator
                  .of(context)
                  .pop,
            ),
            const SizedBox(width: 10),
          ],
          leading: const Icon(Icons.search_outlined, color: Colors.white),
        ),
        body: Column(
          children: [
            Expanded(
              flex: 4,
              child: Stack(
                alignment: Alignment.bottomCenter,
                children: [
                  SizedBox.expand(
                    child: HeroWidget(
                      tag: HeroTag.image(location.urlImage),
                      child: Image.asset(location.urlImage, fit: BoxFit.cover),
                    ),
                  ),
                  Container(
                    padding: const EdgeInsets.all(8),
                    child: LatLongWidget(location: location),
                  ),
                ],
              ),
            ),
            DetailedInfoWidget(location: location),
            Expanded(
              flex: 5,
              child: ReviewsWidget(location: location, animation: animation),
            ),
          ],
        ),
      );
}

```
